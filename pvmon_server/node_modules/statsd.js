var StatsD = require('node_statsd.js').StatsD;

// FIXME - need to use proper configuration!!!!
var client = new StatsD({'host':'graphite'});



// ----------------------------------------------------------------------------
module.exports.insert_event = function(ev,insert_event_final_callback) {

	// for the sake of statsd, I must replace the dots in a hostname by dashes
	// and the slashes by dots because that's how it separates things.

	var statsdpath = ev.host.replace(/\./g,'-') + '.' + ev.service.replace(/\//g,'.');


	client[ev.metric_type](statsdpath,ev.metric);

	if(insert_event_final_callback) {
		process.nextTick(insert_event_final_callback);
	} else {
		console.log('no final callback for statsd value ???');
	}

}

